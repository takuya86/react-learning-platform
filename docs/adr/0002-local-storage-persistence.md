# ADR-0002: LocalStorage による永続化

## ステータス

承認済み

## コンテキスト

ユーザーの学習進捗、クイズセッション、ノートを永続化する必要があった。バックエンドなしで動作する学習プラットフォームとして、クライアントサイドでのデータ保存が求められた。

## 決定

LocalStorageを使用してデータを永続化する。

### 保存するデータ

| キー | 内容 |
|------|------|
| `learning-progress` | 学習進捗（完了レッスン、クイズ結果等） |
| `quiz-session-{quizId}` | クイズの中断セッション |
| `notes-storage` | ノートデータ |

## 理由

### 検討した選択肢

1. **LocalStorage**
   - メリット: シンプル、同期API、十分な容量（5MB）
   - デメリット: 文字列のみ、デバイス間同期なし

2. **IndexedDB**
   - メリット: 大容量、構造化データ、非同期
   - デメリット: API複雑、オーバーキル

3. **バックエンドAPI**
   - メリット: デバイス間同期、データ分析可能
   - デメリット: インフラ必要、認証必要

### 決定理由

- バックエンドなしで動作する要件
- データ量が少なく（数KB）LocalStorageで十分
- シンプルさを優先

## 影響

- デバイス間でデータが共有されない
- ブラウザのデータ消去で進捗がリセットされる
- プライベートブラウジングでは保存されない可能性

## 将来の拡張

認証機能追加時にバックエンド連携を検討。その際はLocalStorageをキャッシュとして活用し、オフライン対応も可能にする。

## 関連

- [進捗機能](../specs/progress.md)
- [ノート機能](../specs/notes.md)
- [クイズ機能](../specs/quiz.md)
